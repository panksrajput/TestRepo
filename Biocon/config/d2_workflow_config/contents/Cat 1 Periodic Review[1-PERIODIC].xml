<?xml version="1.0" encoding="utf-8"?>
<d2_workflow_config>
	<workflow_label_en>Cat 1 Submit for Periodic Review...</workflow_label_en>
	<workflow_label_ja/>
	<activity-list>
		<activity audit_acquired="true" audit_response="true" value="Initiate"/>
		<activity method="dm_noop_auto_method_java" value="start"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(Start WF)" task_subject_en="Start WF" transition_type="promote" value="Start WF"/>
		<activity alias_name="document_coordinator" audit_acquired="true" audit_response="true" check_lifecycle="true" custom_alias_list="periodic_authors¬periodic_reviewers" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_coordinators' and object_name in ($repeatingvalue(applicable_sites))) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 and any g.i_all_users_names NOT IN ('$USER') ENABLE(ROW_BASED)" delegate_type="dql" display_dialog="true" display_task="true" intention_dictionary="Approval Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" requiredOnForward_alias_list="periodic_authors¬periodic_reviewers" requiredOnReject_alias_list="periodic_authors¬periodic_reviewers" signoff_required="false" task_accept_labels_en="Assign Reviewers" task_category_en="$value(a_status)" task_duration="7" task_instructions_en="&quot;$value(object_name)&quot; is scheduled for periodic review and has a periodic review due date of '$value(periodic_review_due_date)'. Please assign the appropriate individual(s) to perform the review task and the document author(s) who will be responsible for revising the document." task_subject_en="&quot;$value(object_name)&quot; is scheduled for Periodic Review." value="coordinator">
			<follow-up message_en="7 days have passed since this task was sent to you. &quot;$value(object_name)&quot; is scheduled for periodic review and has a periodic review due date of '$value(periodic_review_due_date)'. Please assign the appropriate individual(s) to perform the review task as well as the document author(s) who will be responsible for revising the document should a revision be required." recipient_alias="document_coordinator" recipient_other="true" recipient_type="alias" subject_en="There is a task outstanding for the following document &quot;$value(object_name)&quot;"/>
		</activity>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(record reviewers)" task_subject_en="Record Reviewers" transition_type="promote" value="(record reviewers)" workflow_properties_list="wf_periodic_reviewers"/>
		<activity alias_name="periodic_reviewers" audit_acquired="true" audit_response="true" check_lifecycle="false" delegate_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_authors' and object_name in ($repeatingvalue(applicable_sites))) and any g.i_all_users_names = u.user_name and u.user_state = 0 and any g.i_all_users_names NOT IN ('$USER') ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" intention_dictionary="Periodic Review Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" signoff_each_document="false" signoff_required="true" signoff_required_for="all" task_accept_labels_en="Reviewed and No Revision Required" task_category_en="$value(a_status)" task_duration="30" task_instructions_en="&quot;$value(object_name)&quot; is scheduled for periodic review and has a periodic review due date of '$value(periodic_review_due_date)'. Please review the document." task_reject_labels_en="Reviewed and Revision Requested" task_subject_en="&quot;$value(object_name)&quot; is scheduled for Periodic Review." value="Review">
			<follow-up delay="0" message_en="30 days have passed since this task was sent to you. Please review &quot;$value(object_name)&quot; to determine if the document should be accepted and moved forward for further approval. Please note that the document authors have been notified." subject_en="There is a task outstanding for the following document &quot;$value(object_name)&quot;" task_owner="true"/>
			<follow-up delay="0" message_en="The reviewers $value(wf_reviewers) have been notified that they have a task for the document &quot;$value(object_name)&quot;, which has been outstanding for 30 days. If this document needs to be expedited please contact the reviewers directly." recipient_alias="periodic_reviewers" recipient_other="true" recipient_type="alias" subject_en="&quot;$value(object_name)&quot; has been outstanding for 30 days."/>
		</activity>
		<activity display_task="true" lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(do nothing)" task_subject_en="Do Nothing" transition_type="promote" value="(do nothing)"/>
		<activity alias_name="periodic_authors" audit_acquired="true" audit_response="true" check_lifecycle="true" custom_alias_list="" delegate_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_reviewers' and object_name in ($repeatingvalue(applicable_sites))) and any g.i_all_users_names = u.user_name and u.user_state = 0 and any g.i_all_users_names NOT IN ($repeatingvalue(wf_authors)) ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" intention_dictionary="Review Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="false" signoff_required="false" signoff_required_for="forward" task_accept_labels_en="Acknowledge Request For Revision" task_category_en="$value(a_status)" task_instructions_en="&quot;$value(object_name)&quot; has undergone a periodic review and must be acknowledged; please see the comments from Reviewer. By acknowledging the task, you are assuming responsibility for the action on the document as per Reviewer's comments." task_subject_en="&quot;$value(object_name)&quot; has received comments from Periodic Review." value="Acknowledge"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(End WF)" task_subject_en="End WF" transition_type="promote" value="End WF"/>
		<activity method="CDFWorkflowNotificationMethod" value="Finish"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(Check Minor Version)" task_subject_en="Check for Minor Version" transition_type="demote" value="Check for Minor Version"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(Set PR Flag)" task_subject_en="Set PR Flag" transition_type="promote" value="Set PR Flag"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(PR - Create Minor Version)" task_subject_en="Create Minor Version via PR workflow" transition_type="demote" value="Create Minor Version"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(Notify PR Skipped due to Release Pending Version)" task_subject_en="Notify Release Pending Version Exists" transition_type="demote" value="Notify Release Pending Version Exists"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(Check for Release Pending Version)" task_subject_en="Check for Release Pending" transition_type="promote" value="Check for Release Pending"/>
	</activity-list>
	<workflow abort_apply_on_attachments="true" abort_lifecycle="QM Cat 1 Controlled Document Lifecycle" abort_target_state="(rollback via periodic wf)"/>
	<entry_conditions>
		<uniquenesscheck message_failed_en="" uniqueness="Validate CTS rendition of the document is created before going to next stage of workflow."/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is not checked-out"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate user is a Document Coordinator for the selected document."/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is not involved in an active workflow"/>
	</entry_conditions>
	<dialog height="500" width="600">
		<list id="document_coordinator" assistance_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in ($repeatingvalue(doc_coordinators)) and any g.i_all_users_names = u.user_name and u.user_state = 0 union select group_name from dm_group where  any i_supergroups_names in ($repeatingvalue(doc_coordinators)) union select user_name from dm_user where user_name in ($repeatingvalue(doc_coordinators)) and user_state = 0 order by 1" assistance_type="dql" asynchronous="true" label_en="Periodic Review Recipients" linked_attribute="wf_doc_coordinators" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true" value="$value(review_notif_recipients)"/>
		<list id="periodic_reviewers" assistance_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in ($repeatingvalue(reviewers)) or any g.i_supergroups_names in ($repeatingvalue(authors)) or any g.i_supergroups_names in ($repeatingvalue(qo_approvers)) or any g.i_supergroups_names in ($repeatingvalue(doc_coordinators)) or any g.i_supergroups_names in ($repeatingvalue(approvers)) and any g.i_all_users_names = u.user_name and u.user_state = 0 union select group_name from dm_group where  any i_supergroups_names in ($repeatingvalue(reviewers)) or any i_supergroups_names in ($repeatingvalue(authors)) or any i_supergroups_names in ($repeatingvalue(qo_approvers)) or any i_supergroups_names in ($repeatingvalue(doc_coordinators)) or any i_supergroups_names in ($repeatingvalue(approvers)) union select user_name from dm_user where  user_name in ($repeatingvalue(reviewers)) or user_name in ($repeatingvalue(authors)) or user_name in ($repeatingvalue(qo_approvers)) or user_name  in ($repeatingvalue(doc_coordinators)) or user_name in ($repeatingvalue(approvers)) and user_state = 0 order by 1" assistance_type="dql" asynchronous="true" label_en="Reviewers (Periodic Review)" linked_attribute="wf_periodic_reviewers" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true" value="$value(periodic_reviewers)"/>
		<list id="periodic_authors" assistance_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in ($repeatingvalue(authors)) and any g.i_all_users_names = u.user_name and u.user_state = 0 union select group_name from dm_group where  any i_supergroups_names in ($repeatingvalue(authors)) union select user_name from dm_user where user_name in ($repeatingvalue(authors)) order by 1" assistance_type="dql" asynchronous="true" label_en="Authors (Periodic Review)" linked_attribute="wf_authors" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true" value="$value(authors)"/>
	</dialog>
</d2_workflow_config>