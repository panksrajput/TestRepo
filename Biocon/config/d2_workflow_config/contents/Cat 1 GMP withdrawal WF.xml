<?xml version="1.0" encoding="utf-8"?>
<d2_workflow_config>
	<workflow_label_en/>
	<activity-list>
		<activity audit_acquired="true" audit_response="true" value="Initiate"/>
		<activity method="dm_noop_auto_method_java" value="Start"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(Start WF)" transition_type="promote" value="Start WF"/>
		<activity alias_name="approvers" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and (alias_value like '%_approvers' or alias_value like '%_qo_approvers') and object_name in ($repeatingvalue(applicable_sites)) union select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and (alias_value like '%_approvers' or alias_value like '%_qo_approvers') and object_name in ($repeatingvalue(applicable_sites)) and any alias_value is not nullstring) AND ANY g.i_all_users_names NOT IN ('$USER') and any g.i_all_users_names not in(select i_all_users_names from dm_group where group_name='cd_admingroup') AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_dialog="true" display_task="true" intention_dictionary="Withdrawal Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" property_page_forward="On Withdrawal of CAT 1 GMP document - confirm" signoff_each_document="false" signoff_required="true" signoff_required_for="forward" task_instructions_en="Please accept the task to approve the withdrawal of &quot;$value(object_name)&quot;. Upon acceptance, all versions of &quot;$value(object_name)&quot; will be withdrawn." task_subject_en="&quot;$value(object_name)&quot; requires Approval for Withdrawal" value="approvers"/>
		<activity apply_on_attachments="true" lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(withdrawal via wf)" task_subject_en="Withdraw via workflow" transition_type="promote" value="withdraw" workflow_properties_list="withdraw_date¬withdraw_reason¬a_status"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(End WF)" transition_type="promote" value="End WF"/>
		<activity method="CDFWorkflowNotificationMethod" value="Finish"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(reject withdraw)" transition_type="promote" value="reject withdraw" workflow_properties_list="planned_withdraw_date"/>
	</activity-list>
	<workflow abort_apply_on_attachments="false" abort_lifecycle="QM Cat 1 Controlled Document Lifecycle" abort_target_state="(abort withdrawal)"/>
	<entry_conditions/>
	<dialog height="500" width="600">
		<list id="approvers" assistance_dql="select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and (alias_value like '%_approvers' or alias_value like '%_qo_approvers') and object_name in ($repeatingvalue(applicable_sites)) union select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and (alias_value like '%_approvers' or alias_value like '%_qo_approvers') and object_name in ($repeatingvalue(applicable_sites))) and any g.i_all_users_names not in(select i_all_users_names from dm_group where group_name='cd_admingroup')  AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by 1 ENABLE(ROW_BASED)" assistance_type="dql" asynchronous="true" linked_attribute="wf_approvers" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true" value="$value(wf_approvers)"/>
	</dialog>
</d2_workflow_config>