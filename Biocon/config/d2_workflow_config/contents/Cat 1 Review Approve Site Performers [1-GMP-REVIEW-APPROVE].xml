<?xml version="1.0" encoding="utf-8"?>
<d2_workflow_config>
	<workflow_label_en>Cat1 GMP Submit for Review and Approval...(eSignature)</workflow_label_en>
	<activity-list>
		<activity audit_acquired="true" audit_response="true" value="Initiate"/>
		<activity method="dm_noop_auto_method_java" value="Start"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(Start WF)" task_subject_en="Start WF" transition_type="promote" value="Start WF"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="For Review" task_subject_en="Promote to For Review" transition_type="promote" value="promote to For Review"/>
		<activity alias_name="reviewers" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_reviewers' and object_name in ($repeatingvalue(applicable_sites))) and any g.i_all_users_names NOT IN ($repeatingvalue(wf_reviewers)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" intention_dictionary="Review Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" property_page_forward="All Solutions Review Nosig Property" signoff_required="false" signoff_required_for="forward" task_accept_labels_en="Reviewed Without Comments" task_category_en="$value(a_status)" task_instructions_en="The attached document requires your attention to review. If you accept the document use 'Reviewed Without Comments' to move the document forward. If you do not accept the document use 'Reviewed With Comments' to send it back to Draft." task_reject_labels_en="Reviewed With Comments" task_subject_en="&quot;$value(object_name)&quot; requires your review" value="For Review"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(post review)" task_subject_en="Post Review" transition_type="promote" value="Post Review" workflow_properties_list="review_date"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="For Approval" task_subject_en="Promote to For Approval" transition_type="promote" value="promote to For Approval"/>
		<activity alias_name="approvers" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_approvers' and alias_value not like '%_qo_approvers' and object_name in ($repeatingvalue(applicable_sites))) and any i_all_users_names NOT IN ($repeatingvalue(wf_approvers))  AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" is_pseudo_task="true" mandatory_reject_comment="true" property_page_forward="All Solutions Approve Nosig Property" task_accept_labels_en="Approve" task_category_en="$value(a_status)" task_duration="30" task_instructions_en="If you approve the documents, please accept the task." task_reject_labels_en="Reject" task_subject_en="&quot;$value(object_name)&quot; requires your approval" value="For Approval- no Sig">
			<follow-up delay="0" message_en="30 days have passed since this task was sent to you. Please review &quot;$value(object_name)&quot; to determine if the document should be accepted and moved forward for further approval.&lt;br&gt;Please note that the document authors have been notified." subject_en="There is a task outstanding for the following document &quot;$value(object_name)&quot;" task_owner="true"/>
			<follow-up delay="0" message_en="The approvers $value(wf_approvers) have been notified that they have a task for the document &quot;$value(object_name)&quot;, which has been outstanding for 30 days. If this document needs to be expedited please contact the approvers directly." recipient_alias="authors" recipient_other="true" recipient_type="alias" subject_en="&quot;$value(object_name)&quot; has been outstanding for 30 days."/>
		</activity>
		<activity alias_name="approvers" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_approvers' and alias_value not like '%_qo_approvers' and object_name in ($repeatingvalue(applicable_sites))) and any i_all_users_names NOT IN ($repeatingvalue(wf_approvers)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" intention_dictionary="Bio CAT1 Approval Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" signoff_each_document="false" signoff_required="true" signoff_required_for="forward" task_accept_labels_en="Approve" task_category_en="$value(a_status)" task_duration="30" task_instructions_en="If you approve the documents, please accept the task. Please note that your electronic signature is needed on approval." task_reject_labels_en="Reject" task_subject_en="&quot;$value(object_name)&quot; requires your approval" value="For Approval">
			<follow-up delay="0" message_en="30 days have passed since this task was sent to you. Please review &quot;$value(object_name)&quot; to determine if the document should be accepted and moved forward for further approval.&lt;br&gt;Please note that the document authors have been notified." subject_en="There is a task outstanding for the following document &quot;$value(object_name)&quot;" task_owner="true"/>
			<follow-up delay="0" message_en="The approvers $value(wf_approvers) have been notified that they have a task for the document &quot;$value(object_name)&quot;, which has been outstanding for 30 days. If this document needs to be expedited please contact the approvers directly." recipient_alias="authors" recipient_other="true" recipient_type="alias" subject_en="&quot;$value(object_name)&quot; has been outstanding for 30 days."/>
		</activity>
		<activity alias_name="qo_approvers" audit_acquired="true" audit_response="true" check_lifecycle="false" delegate_dql="select g.i_all_users_names from dm_group g,dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_qo_approvers' and object_name in ($repeatingvalue(applicable_sites))) and any i_all_users_names NOT IN ($repeatingvalue(wf_qo_approvers)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" intention_dictionary="Approval Intention Codes" is_pseudo_task="true" mandatory_intention="true" mandatory_reject_comment="true" signoff_each_document="false" signoff_required="true" signoff_required_for="forward" task_accept_labels_en="Approve" task_category_en="$value(a_status)" task_duration="30" task_instructions_en="If you approve the documents, please accept the task. Please note that your electronic signature is needed on approval." task_reject_labels_en="Reject" task_subject_en="&quot;$value(object_name)&quot; requires your approval" value="QO Approval">
			<follow-up delay="0" message_en="30 days have passed since this task was sent to you. Please review &quot;$value(object_name)&quot; to determine if the document should be accepted and moved forward for further approval.&lt;br&gt;Please note that the document authors have been notified." subject_en="There is a task outstanding for the following document &quot;$value(object_name)&quot;" task_owner="true"/>
			<follow-up delay="0" message_en="The qo approvers $value(wf_qo_approvers) have been notified that they have a task for the document &quot;$value(object_name)&quot;, which has been outstanding for 30 days. If this document needs to be expedited please contact the approvers directly." recipient_alias="authors" recipient_other="true" recipient_type="alias" subject_en="&quot;$value(object_name)&quot; has been outstanding for 30 days."/>
		</activity>
		<activity alias_name="authors" audit_acquired="true" audit_response="true" check_lifecycle="false" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_authors' and object_name in ($repeatingvalue(applicable_sites))) and any i_all_users_names NOT IN ($repeatingvalue(wf_authors)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" is_pseudo_task="true" mandatory_reject_comment="true" task_accept_labels_en="Resend" task_category_en="$value(a_status)" task_instructions_en="Please make any necessary changes to &quot;$value(object_name)&quot; and 'Resend' the task to resubmit for approval." task_reject_labels_en="End Workflow" task_subject_en="&quot;$value(object_name)&quot; was rejected" value="Draft - Do not allow skip"/>
		<activity alias_name="document_coordinator" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_coordinators' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) and any g.i_all_users_names NOT IN ($repeatingvalue(wf_doc_coordinators)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0" delegate_type="dql" display_dialog="true" display_task="true" is_pseudo_task="true" mandatory_reject_comment="true" no_notification="false" property_page_forward="On making a Cat 1 document Effective - set Readers and effectivity parameters" task_category_en="$value(a_status)" task_duration="30" task_instructions_en="The document &quot;$value(object_name)&quot; has been approved and planned effective and periodic review dates can be set. Please accept the task to assign the dates so that the document can become Effective." task_subject_en="&quot;$value(object_name)&quot; is ready to be made Effective." value="Ready to Make Effective">
			<follow-up delay="0" message_en="The document &quot;$value(object_name)&quot; is available in your task list and is waiting for your assignment of the planned effective and periodic review dates." subject_en="The document &quot;$value(object_name)&quot; is ready to be made Effective." task_owner="true"/>
		</activity>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(Draft with New Version)" task_subject_en="Demote to Draft and Version the Document" transition_type="demote" value="demote to Draft with version"/>
		<activity alias_name="authors" audit_acquired="true" audit_response="true" check_lifecycle="true" delegate_dql="select g.i_all_users_names from dm_group g, dm_user u where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_authors' and object_name in ($repeatingvalue(applicable_sites))) and any g.i_all_users_names NOT IN ($repeatingvalue(wf_authors)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 ENABLE(ROW_BASED)" delegate_type="dql" display_task="true" is_pseudo_task="true" mandatory_reject_comment="true" task_accept_labels_en="Resend" task_category_en="$value(a_status)" task_instructions_en="Please make any necessary changes to &quot;$value(object_name)&quot; and 'Resend' the task to resubmit for review and/or approval." task_reject_labels_en="End Workflow" task_subject_en="&quot;$value(object_name)&quot; was rejected" value="Draft"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(chk for valid approvers)" task_subject_en="Check for valid Approvers/QO Approvers." transition_type="promote" value="Check for Valid Approvers"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="Release Pending" task_subject_en="Promote to Release Pending" transition_type="promote" value="promote to Release Pending"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(update planned effective date)" task_subject_en="Set dates and do not send for review" transition_type="promote" value="set dates and promote" workflow_properties_list="expiration_date¬review_date¬review_notif_recipients¬wf_doc_coordinators¬planned_effective_date¬review_start_days¬planned_withdraw_date"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(End WF)" task_subject_en="End WF" transition_type="promote" value="End WF"/>
		<activity method="CDFWorkflowNotificationMethod" value="Finish"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(check annotations)" task_subject_en="check for document annotations" transition_type="promote" value="chk annotations"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="Draft" task_subject_en="Demote to Draft with Annotations" transition_type="demote" value="send to Authors with annotations"/>
		<activity lifecycle="QM Cat 1 Controlled Document Lifecycle" method="D2WFLifeCycleMethod" target_state="(version document)" task_subject_en="Skip For Review and Send to For Approval" transition_type="promote" value="version the document"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="Draft" task_subject_en="Demote to Draft from Review" transition_type="demote" value="demote to draft from Review"/>
		<activity audit_acquired="true" audit_response="true" check_lifecycle="false" custom_alias_list="approvers¬qo_approvers" display_task="true" mandatory_reject_comment="true" task_accept_labels_en="Reselect Performers and Resend" task_category_en="$value(a_status)" task_instructions_en="You cannot designate yourself as the sole approver of &quot;$value(object_name)&quot;. The document must be approved by someone other than yourself, although you can include yourself as an additional approver if required." task_reject_labels_en="End Workflow" task_subject_en="Reselect approvers for &quot;$value(object_name)&quot;" value="Correct Invalid Approvers"/>
		<activity lifecycle="Cat 1 Controlled Document Lifecycle Model" method="D2WFLifeCycleMethod" target_state="(Draft with New Version)" task_subject_en="Demote to Draft and Version the Document" transition_type="demote" value="demote to draft and version the doc"/>
	</activity-list>
	<workflow abort_apply_on_attachments="false" abort_lifecycle="Cat 1 Controlled Document Lifecycle Model" abort_target_state="(Abort WF)"/>
	<entry_conditions>
		<uniquenesscheck message_failed_en="" uniqueness="Validate CTS rendition of the document is created before going to next stage of workflow."/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is not checked-out"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is not involved in an active workflow including periodic and withdrawal WF"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is the CURRENT version"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate document has at least one Document Coordinator defined"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate user is an Author or Document Coordinator for the selected document"/>
		<uniquenesscheck message_failed_en="" uniqueness="Validate selected document is a Draft document"/>
		<attribute compare="eq" message_failed_en="The Process List is not updated correctly. Hence document cannot be sent to the workflow." name="wf_process_list" value="1-GMP-APPROVE-REVIEW"/>
		<attribute compare="contains" message_failed_en="This document is configured for approval without eSignatures. It cannot be sent on a workflow that uses eSignatures." name="wf_signature_list" value="APPROVESIG"/>
	</entry_conditions>
	<dialog height="660" width="600">
		<list id="authors" assistance_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_authors' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by g.i_all_users_names" assistance_type="dql" asynchronous="true" label_en="Document Authors" linked_attribute="wf_authors" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true" value="$USER"/>
		<list id="reviewers" assistance_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_reviewers' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by g.i_all_users_names" assistance_type="dql" asynchronous="true" label_en="Document Reviewers" linked_attribute="wf_reviewers" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true"/>
		<list id="approvers" assistance_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_approvers' and alias_value not like '%_qo_approvers' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by g.i_all_users_names" assistance_type="dql" asynchronous="true" label_en="Document Approvers" linked_attribute="wf_approvers" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true"/>
		<list id="qo_approvers" assistance_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_qo_approvers' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by g.i_all_users_names" assistance_type="dql" asynchronous="true" label_en="QO Approvers" linked_attribute="wf_qo_approvers" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true"/>
		<list id="document_coordinator" assistance_dql="select g.i_all_users_names from dm_user u, dm_group g where any g.i_supergroups_names in (select alias_value from d2_dictionary_value where dictionary_name like 'GMP Applicable Sites' and any alias_value is not nullstring and alias_value like '%_coordinators' and object_name in ($repeatingvalue(applicable_sites)) ENABLE(ROW_BASED)) AND ANY g.i_all_users_names = u.user_name and u.user_state = 0 order by g.i_all_users_names" assistance_type="dql" asynchronous="true" label_en="Document Coordinators" linked_attribute="wf_doc_coordinators" required_values_count_min="1" requiredOnStartup="true" rows="4" sorted="true"/>
		<comment label_en="The above users are strictly for workflow purpose."/>
		<comment label_en="Any change here will not change the users in the process info tab of the document properties"/>
	</dialog>
</d2_workflow_config>